<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple D&D Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 650px;
            margin: 10px auto;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .section {
            margin: 10px;
            background-color: #fff;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #333;
            margin-top: 0;
        }
        .title input {
            font-size: 1.5em;
            width: 94.5%;
            padding: 5px;
            margin-bottom: 0px;
            align-items:left;
          margin-left: 1.7%;
        }
        .stat select {
            margin-left: 10px;
            padding: 5px;
        }
        .stat p {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .stat-description {
            font-style: italic;
            color: #555;
        }
        .hp {
            position: relative;
            min-height: 50px;
        }
        .hp-controls {
            display: flex;
            gap: 10px;
            position: absolute;
            bottom: 10px;
            left: 10px;
        }
        .hp button {
            padding: 5px 10px;
            cursor: pointer;
        }
        .hp-heart {
            width: 100px;
            height: 115px;
            background-color: #d32f2f;
            color: white;
            font-size: 1em;
            font-weight: bold;
            border: none;
            clip-path: path('M50 30 C20 00, 0 40, 3 50 C0 80, 50 100, 50 100 C50 100, 100 80, 97 50 C100 40, 80 0, 50 30 Z');
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: absolute;
            top: 0%;
            right: 10px;
            transform: translateY(-50%);
        }
        .abilities input {
            width: 97%;
            margin: 5px 0;
            padding: 5px;
        }
        .special-ability input[type="text"] {
            width: 97%;
            padding: 5px;
            margin: 5px 0;
        }
        .special-ability .uses {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .special-ability label {
            margin-right: 10px;
        }
        .dice-roller {
            text-align: left;
        }
        .dice-button {
            width: 100px;
            height: 100px;
            background-color: #FFD700;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin: 0 auto;
        }
        .dice-button:hover {
            background-color: #E6B800;
        }
        .notes textarea {
            width: 97%;
            height: 100px;
            margin: 10px 0;
            padding: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 3px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="title">
        <input type="text" id="player-name" placeholder="Enter Character Name" onchange="saveName()">
    </div>

    <div class="section stat">
        <h2>Stats</h2>
        <p>Constitution: <select id="constitution" onchange="updateStats()">
            <option value="-1">-1</option>
            <option value="0" selected>0</option>
            <option value="1">+1</option>
        </select> <span class="stat-description">Affects HP and defensive rolls.</span></p>
        <p>Power: <select id="power" onchange="updateStats()">
            <option value="-1">-1</option>
            <option value="0" selected>0</option>
            <option value="1">+1</option>
        </select> <span class="stat-description">Affects damage/healing and offensive rolls.</span></p>
        <p>Mind: <select id="mind" onchange="updateStats()">
            <option value="-1">-1</option>
            <option value="0" selected>0</option>
            <option value="1">+1</option>
        </select> <span class="stat-description">Affects roleplay/social/non-combat rolls.</span></p>
        <p id="stat-error" style="color: red; display: none;">All stats must be unique!</p>
    </div>

    <div class="section hp">
        <h2>Hit Points (HP)</h2>
        <div class="hp">
            <div class="hp-controls">
                <button onclick="changeHP(1)">+1 HP</button>
                <button onclick="changeHP(-1)">-1 HP</button>
            </div>
            <div class="hp-heart" id="hp-display">5 / 5</div>
        </div>
    </div>

    <div class="section abilities">
        <h2>Abilities/Weapons</h2>
        <p>Damage/Healing: <span id="damage">2</span></p>
        <input type="text" id="ability1" placeholder="Ability or Weapon 1" onchange="saveAbilities()">
        <input type="text" id="ability2" placeholder="Ability or Weapon 2" onchange="saveAbilities()">
        <input type="text" id="ability3" placeholder="Ability or Weapon 3" onchange="saveAbilities()">
    </div>

    <div class="section special-ability">
        <h2>Special Ability or Tool</h2>
        <p>Effectiveness: <span id="Mind">2</span></p>
        <input type="text" id="special-ability" placeholder="Enter your special ability or tool" onchange="saveSpecialAbility()">
        <div class="uses">
            <span>Uses:</span>
            <label><input type="checkbox" id="use1" onchange="saveSpecialAbility()"></label>
            <label><input type="checkbox" id="use2" onchange="saveSpecialAbility()"></label>
            <label><input type="checkbox" id="use3" onchange="saveSpecialAbility()"></label>
        </div>
    </div>

    <div class="section dice-roller">
        <h2>Dice Roller (d20)</h2>
              <p align=left><i>Rolling 1 yields great failure!</i></p>
        <button class="dice-button" id="dice-button" onclick="rollDice()"><span id="dice-result">-</span></button>
              <p align=Right><i>Rolling 20 yields great success!</i></p>
    </div>

    <div class="section notes">
        <h2>Notes</h2>
        <textarea id="notes" placeholder="Add your notes here..."></textarea>
        <br>
        <button onclick="saveNotes()">Save Notes</button>
    </div>

    <script>
        let currentHP = 5;
        let totalHP = 5;

        function saveName() {
            const name = document.getElementById('player-name').value;
            localStorage.setItem('player-name', name);
        }

        function updateStats() {
            const con = parseInt(document.getElementById('constitution').value);
            const pow = parseInt(document.getElementById('power').value);
            const mind = parseInt(document.getElementById('mind').value);

            // Check for unique stat values
            if (con === pow || con === mind || pow === mind) {
                document.getElementById('stat-error').style.display = 'block';
                return;
            } else {
                document.getElementById('stat-error').style.display = 'none';
            }

            // Update HP based on Constitution
            totalHP = 5 + con;
            currentHP = Math.min(currentHP, totalHP);
            document.getElementById('hp-display').textContent = `${currentHP} / ${totalHP}`;

            // Update damage based on Power
            const damage = 2 + pow;
            document.getElementById('damage').textContent = damage;

            // Update damage based on Power
            const mind = 0 + mind;
            document.getElementById('Mind').textContent = Mind;

            // Save stats to local storage
            localStorage.setItem('constitution', con);
            localStorage.setItem('power', pow);
            localStorage.setItem('mind', mind);
        }

        function changeHP(amount) {
            currentHP = Math.max(0, Math.min(totalHP, currentHP + amount));
            document.getElementById('hp-display').textContent = `${currentHP} / ${totalHP}`;
            localStorage.setItem('current-hp', currentHP);
        }

        function saveAbilities() {
            const ability1 = document.getElementById('ability1').value;
            const ability2 = document.getElementById('ability2').value;
            const ability3 = document.getElementById('ability3').value;
            localStorage.setItem('ability1', ability1);
            localStorage.setItem('ability2', ability2);
            localStorage.setItem('ability3', ability3);
        }

        function saveSpecialAbility() {
            const special = document.getElementById('special-ability').value;
            localStorage.setItem('special-ability', special);
            localStorage.setItem('use1', document.getElementById('use1').checked);
            localStorage.setItem('use2', document.getElementById('use2').checked);
            localStorage.setItem('use3', document.getElementById('use3').checked);
        }

        function saveNotes() {
            const notes = document.getElementById('notes').value;
            localStorage.setItem('notes', notes);
            alert('Notes saved!');
        }

        function rollDice() {
            const result = Math.floor(Math.random() * 20) + 1;
            document.getElementById('dice-result').textContent = result;
        }

        // Load saved data on page load
        window.onload = function() {
            const savedName = localStorage.getItem('player-name');
            if (savedName) document.getElementById('player-name').value = savedName;

            const savedCon = localStorage.getItem('constitution');
            const savedPow = localStorage.getItem('power');
            const savedMind = localStorage.getItem('mind');
            if (savedCon) document.getElementById('constitution').value = savedCon;
            if (savedPow) document.getElementById('power').value = savedPow;
            if (savedMind) document.getElementById('mind').value = savedMind;
            updateStats();

            const savedHP = localStorage.getItem('current-hp');
            if (savedHP) {
                currentHP = parseInt(savedHP);
                document.getElementById('hp-display').textContent = `${currentHP} / ${totalHP}`;
            }

            const savedAbility1 = localStorage.getItem('ability1');
            const savedAbility2 = localStorage.getItem('ability2');
            const savedAbility3 = localStorage.getItem('ability3');
            if (savedAbility1) document.getElementById('ability1').value = savedAbility1;
            if (savedAbility2) document.getElementById('ability2').value = savedAbility2;
            if (savedAbility3) document.getElementById('ability3').value = savedAbility3;

            const savedSpecial = localStorage.getItem('special-ability');
            if (savedSpecial) document.getElementById('special-ability').value = savedSpecial;
            document.getElementById('use1').checked = localStorage.getItem('use1') === 'true';
            document.getElementById('use2').checked = localStorage.getItem('use2') === 'true';
            document.getElementById('use3').checked = localStorage.getItem('use3') === 'true';

            const savedNotes = localStorage.getItem('notes');
            if (savedNotes) document.getElementById('notes').value = savedNotes;
        };
    </script>
</body>
</html>
